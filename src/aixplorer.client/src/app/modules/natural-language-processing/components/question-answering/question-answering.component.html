<div class="p-3">
    <div class="p-4 max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">AI Chat</h2>
        <!-- Chat History -->
        <div *ngFor="let message of chatHistory" class="mb-4">
            <div class="p-2 bg-blue-100 rounded-lg text-gray-800 mb-2">
                <strong>User:</strong> {{ message.question }}
            </div>
            <div *ngIf="message.answer" class="p-2 bg-gray-100 rounded-lg text-gray-800 overflow-x-auto">
                <strong>AI:</strong>
                <span [innerHtml]="message.answer | markdown | async" class="max-w-full overflow-x-auto whitespace-pre-wrap word-break break-words"></span>
            </div>
        </div>
        <div class="flex flex-col space-y-4">
            <textarea [(ngModel)]="userInput"
                          rows="5"
                          class="block w-full text-sm text-gray-700
                 border border-gray-300 rounded-lg
                 focus:outline-none focus:ring-2 focus:ring-header focus:border-transparent"
                          placeholder="Type your question here...">
            </textarea>
            <button (click)="submitMessage()" [disabled]="isAwaitingResponse"
                    class="w-full px-4 py-2 text-white font-medium
                       bg-button
                       rounded-lg shadow-sm hover:bg-button-hover focus:outline-none focus:ring-2 focus:ring-header focus:ring-offset-2
                       disabled:bg-button-disabled disabled:cursor-not-allowed">
                Submit
            </button>
        </div>
    </div>
</div>
